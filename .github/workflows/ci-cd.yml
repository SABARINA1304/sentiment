deploy:
  runs-on: ubuntu-latest
  needs: build  # Ensure build job completes successfully

  steps:
    - name: Checkout code
      uses: actions/checkout@v4  # Use the latest stable version

    - name: Login to Docker Hub
      env:
        DOCKER_USERNAME: ${{ secrets.DOCKER_USERNAME }}
        DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
      run: |
        echo "Logging in to Docker Hub..."
        echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin

    - name: Build and Push Docker image
      run: |
        echo "Building Docker image..."
        docker build -t yourusername/flask-app:latest .
        echo "Pushing Docker image..."
        docker push yourusername/flask-app:latest

    - name: Deploy to server (optional)
      run: |
        echo "Deploying to server..."
        # Add your deployment commands here
        # Example: SSH to server and pull the latest image
        echo "Deployment command executed."
